# Smart Attendance - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## –û–±–∑–æ—Ä
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Smart Attendance —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –¥–≤—É—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö:
- **–í–µ–± (Web)**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç REST API —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL —á–µ—Ä–µ–∑ Prisma
- **–ú–æ–±–∏–ª—å–Ω—ã–µ (Android/iOS)**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Firebase

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend (–¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `test2` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å –ø–∞—Ä–æ–ª–µ–º `2008181`:

```sql
-- –í PostgreSQL —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç:
CREATE DATABASE test2;
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `server/`:

```bash
cd server
echo DATABASE_URL="postgresql://postgres:2008181@localhost:5432/test2" > .env
echo JWT_SECRET="your-secret-key-change-this-in-production" >> .env
echo PORT=3000 >> .env
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é `server/.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```env
DATABASE_URL="postgresql://postgres:2008181@localhost:5432/test2"
JWT_SECRET="your-secret-key-change-this-in-production"
PORT=3000
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–µ—Ä–≤–µ—Ä–∞
```bash
cd server
npm install
```

### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
```bash
npm run prisma:generate
```

### 6. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
npm run prisma:migrate
```
–ö–æ–≥–¥–∞ —Å–ø—Ä–æ—Å—è—Ç –∏–º—è –º–∏–≥—Ä–∞—Ü–∏–∏, –≤–≤–µ–¥–∏—Ç–µ: `init`

### 7. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
npm run dev
```

–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞ `http://localhost:3000`

### 8. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Prisma Studio:
```bash
npm run prisma:studio
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Flutter
```bash
flutter pub get
```

### 2. –ó–∞–ø—É—Å–∫ –≤–µ–±-–≤–µ—Ä—Å–∏–∏
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω, –∑–∞—Ç–µ–º:
```bash
flutter run -d edge
```
–∏–ª–∏
```bash
flutter run -d chrome
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Backend (server/)
```
server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma.ts         # Prisma client
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.middleware.ts # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îÇ       ‚îú‚îÄ‚îÄ auth.routes.ts     # –ú–∞—Ä—à—Ä—É—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ group.routes.ts    # –ú–∞—Ä—à—Ä—É—Ç—ã –≥—Ä—É–ø–ø
‚îÇ       ‚îú‚îÄ‚îÄ student.routes.ts  # –ú–∞—Ä—à—Ä—É—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ lesson.routes.ts   # –ú–∞—Ä—à—Ä—É—Ç—ã –∑–∞–Ω—è—Ç–∏–π
‚îÇ       ‚îî‚îÄ‚îÄ attendance.routes.ts # –ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma         # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é)
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

### Flutter (lib/)
```
lib/
‚îú‚îÄ‚îÄ main.dart                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ web/mobile)
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api_service.dart      # REST API –∫–ª–∏–µ–Ω—Ç –¥–ª—è web
‚îÇ   ‚îî‚îÄ‚îÄ web_auth_service.dart # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è web
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ auth_provider.dart    # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è mobile (Firebase)
‚îÇ   ‚îî‚îÄ‚îÄ web_auth_provider.dart # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è web (REST API)
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ auth_provider_helper.dart # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö–µ–ª–ø–µ—Ä
```

## API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –í—Ö–æ–¥
- `GET /api/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `POST /api/auth/logout` - –í—ã—Ö–æ–¥

### –ì—Ä—É–ø–ø—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω)
- `POST /api/groups` - –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É (—É—á–∏—Ç–µ–ª—å)
- `GET /api/groups/my-groups` - –ú–æ–∏ –≥—Ä—É–ø–ø—ã
- `GET /api/groups/:id` - –ü–æ–ª—É—á–∏—Ç—å –≥—Ä—É–ø–ø—É
- `PUT /api/groups/:id` - –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—É
- `DELETE /api/groups/:id` - –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É

### –°—Ç—É–¥–µ–Ω—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω)
- `POST /api/students` - –°–æ–∑–¥–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/students/group/:groupId` - –°—Ç—É–¥–µ–Ω—Ç—ã –≥—Ä—É–ø–ø—ã
- `GET /api/students/:id` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `PUT /api/students/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `DELETE /api/students/:id` - –£–¥–∞–ª–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞

### –ó–∞–Ω—è—Ç–∏—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω)
- `POST /api/lessons` - –°–æ–∑–¥–∞—Ç—å –∑–∞–Ω—è—Ç–∏–µ
- `GET /api/lessons/group/:groupId` - –ó–∞–Ω—è—Ç–∏—è –≥—Ä—É–ø–ø—ã
- `GET /api/lessons/:id` - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ
- `PUT /api/lessons/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ
- `DELETE /api/lessons/:id` - –£–¥–∞–ª–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ

### –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω)
- `POST /api/attendance` - –û—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å
- `GET /api/attendance/lesson/:lessonId` - –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å –∑–∞–Ω—è—Ç–∏—è
- `GET /api/attendance/student/:studentId` - –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/attendance/stats/group/:groupId` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ Firebase –Ω–∞ web
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –í–µ–±-–≤–µ—Ä—Å–∏—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç REST API –≤–º–µ—Å—Ç–æ Firebase

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `.env`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `test2` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
–ï—Å–ª–∏ –ø–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç, –∏–∑–º–µ–Ω–∏—Ç–µ `PORT` –≤ `.env` –Ω–∞ –¥—Ä—É–≥–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3001)

### CORS –æ—à–∏–±–∫–∏
Backend –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å CORS, –Ω–æ –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost:3000
- Flutter web –∑–∞–ø—É—â–µ–Ω –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-–≤–µ—Ä—Å–∏–∏:
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1 - Backend
cd server
npm install
npm run prisma:generate
npm run prisma:migrate
npm run dev

# –¢–µ—Ä–º–∏–Ω–∞–ª 2 - Flutter Web
flutter pub get
flutter run -d edge
```

### –î–ª—è –∑–∞–ø—É—Å–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏:
```bash
flutter run -d <device_id>
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ Backend API —Å Prisma —Å–æ–∑–¥–∞–Ω
2. ‚úÖ Flutter –≤–µ–± –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞
3. ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Firebase (mobile) –∏ REST API (web)
4. üî≤ –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ server/
5. üî≤ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
6. üî≤ –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä
7. üî≤ –ó–∞–ø—É—Å—Ç–∏—Ç–µ Flutter –≤–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –∏—Å–ø–æ–ª—å–∑—É—è curl –∏–ª–∏ Postman:

```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST http://localhost:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"teacher@test.com","password":"password123","name":"Test Teacher","role":"teacher"}'

# –í—Ö–æ–¥
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"teacher@test.com","password":"password123"}'
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`
2. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –¥–ª—è Flutter web –æ—à–∏–±–æ–∫
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
